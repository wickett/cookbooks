[Main]

##
# datadog defaults
##

dd_url: <%= @dd_url %>
api_key: <%= @api_key %>
debug_mode: <%= node['datadog']['debug'] %>
check_freq: <%= node['datadog']['check_freq'] %>
agent_key: <%= node['datadog']['debug'] %>
hostname: <%= node.name %>
use_ec2_instance_id: <%= node['datadog']['use_ec2_instance_id'] ? "yes": "no" %>
use_mount: <%= node['datadog']['use_mount'] ? "yes" : "no"  %>
listen_port: <%= node['datadog']['agent_port'] %>

<% if node['datadog']['graphite'] %>
graphite_listen_port: <%= node['datadog']['graphite_port'] %>
<% end %>

##
# EY-specific services
##
<% if node['redis'] %>
redis_urls: localhost:<%= node['redis']['port'] %>
<% end %>

<% if node['members'] %>
memcache_server: <%= node['members'].first() %>
memcache_port: 11211
<% end %>